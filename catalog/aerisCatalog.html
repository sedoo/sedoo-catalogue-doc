<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Description | CATALOGUE AERIS</title>
    <meta name="description" content="by Sedoo">
    
    
    <link rel="preload" href="/sedoo-catalogue-doc/assets/css/styles.91d0e13d.css" as="style"><link rel="preload" href="/sedoo-catalogue-doc/assets/js/app.91d0e13d.js" as="script"><link rel="preload" href="/sedoo-catalogue-doc/assets/js/4.9a9e73ef.js" as="script"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/1.bf1e5871.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/10.8dfbf41e.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/11.2a88ac4a.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/12.48c495dd.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/13.771829e4.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/14.860f3585.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/15.68c56a74.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/16.27744ff8.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/17.d0fd8426.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/18.d4d4ad3c.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/19.3378f1b1.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/2.14b28614.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/20.1069b83c.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/21.8e533de2.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/22.109dd519.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/23.70966f49.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/3.f1de7933.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/5.be08c6fc.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/6.6e38fb31.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/7.a7373b4d.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/8.b760dbb6.js"><link rel="prefetch" href="/sedoo-catalogue-doc/assets/js/9.65f2b2a3.js">
    <link rel="stylesheet" href="/sedoo-catalogue-doc/assets/css/styles.91d0e13d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/sedoo-catalogue-doc/" class="home-link router-link-active"><!----><span class="site-name">
      CATALOGUE AERIS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/sedoo-catalogue-doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/sedoo-catalogue-doc/catalog/" class="nav-link router-link-active">Catalogue</a></div><div class="nav-item"><a href="/sedoo-catalogue-doc/metadata/" class="nav-link">Blocs de métadonnées</a></div><div class="nav-item"><a href="/sedoo-catalogue-doc/searchcriteria/" class="nav-link">Blocs de critère de recherche</a></div><div class="nav-item"><a href="https://git.icare.univ-lille1.fr/aeris/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/sedoo-catalogue-doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/sedoo-catalogue-doc/catalog/" class="nav-link router-link-active">Catalogue</a></div><div class="nav-item"><a href="/sedoo-catalogue-doc/metadata/" class="nav-link">Blocs de métadonnées</a></div><div class="nav-item"><a href="/sedoo-catalogue-doc/searchcriteria/" class="nav-link">Blocs de critère de recherche</a></div><div class="nav-item"><a href="https://git.icare.univ-lille1.fr/aeris/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Pour débuter</span><!----></p><ul class="sidebar-group-items"><li><a href="/sedoo-catalogue-doc/catalog/src-code.html" class="sidebar-link">Code source</a></li><li><a href="/sedoo-catalogue-doc/catalog/" aria-current="page" class="sidebar-link">Scripts</a></li><li><a href="/sedoo-catalogue-doc/catalog/project-structure.html" class="sidebar-link">Infrastructure</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Application Catalogue</span><!----></p><ul class="sidebar-group-items"><li><a href="/sedoo-catalogue-doc/catalog/howItWorks.html" class="sidebar-link">Fonctionnement</a></li><li><a href="/sedoo-catalogue-doc/catalog/aerisCatalog.html" aria-current="page" class="active sidebar-link">Catalogue Aeris</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sedoo-catalogue-doc/catalog/aerisCatalog.html#description" class="sidebar-link">Description</a></li><li class="sidebar-sub-header"><a href="/sedoo-catalogue-doc/catalog/aerisCatalog.html#affichage-des-critères-de-recherches" class="sidebar-link">Affichage des critères de recherches</a></li><li class="sidebar-sub-header"><a href="/sedoo-catalogue-doc/catalog/aerisCatalog.html#affichage-d’une-fiche-de-métadonnées" class="sidebar-link">Affichage d’une fiche de métadonnées</a></li></ul></li><li><a href="/sedoo-catalogue-doc/catalog/store.html" class="sidebar-link">Liste des modules Vuex</a></li><li><a href="/sedoo-catalogue-doc/catalog/improvement.html" class="sidebar-link">Points d’améliorations</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Store Vuex</span><!----></p><ul class="sidebar-group-items"><li><a href="/sedoo-catalogue-doc/catalog/vuex-introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/sedoo-catalogue-doc/catalog/vuex-filters.html" class="sidebar-link">Filters</a></li><li><a href="/sedoo-catalogue-doc/catalog/vuex-summaries.html" class="sidebar-link">Summaries</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h2 id="description"><a href="#description" aria-hidden="true" class="header-anchor">#</a> Description</h2><p>C’est le composant principal. Il est appelé par le composant aeris-catalogue (ce qui devrait changer dans le futur). Il appelle et contrôle partiellement les différentes parties de l’application :</p><ul><li>Le composant qui affiche les critères de recherche : <code>aeris-catalog-criteria</code>, qui est utilisé avec des slots VueJs,</li><li>Le composant du cadis de téléchargement : <code>aeris-catalog-cart</code>,</li><li>Le composant qui affiche le résultat de la recherche : <code>aeris-catalog-summaries</code>,</li><li>le composant qui affiche la fiche sélectionnée à partir des summaries : <code>aeris-catalog-metadata-panel</code>,</li><li>le composant qui affiche les différents boutons d’éditions en haut du panel : <code>aeris-landing-page-edition</code>.</li></ul><p>Au moment de la création du composant, un script se lance pour l’identification de l’utilisateur.</p><h2 id="affichage-des-critères-de-recherches"><a href="#affichage-des-critères-de-recherches" aria-hidden="true" class="header-anchor">#</a> Affichage des critères de recherches</h2><p>Le code qui permet d’afficher les critères de recherches se trouve dans le composant <code>aeris-catalogue</code>, à travers le slot « <code>buttons-criteria</code> » qui est envoyé à <code>aeris-catalog</code>.</p><div class="danger custom-block"><p class="custom-block-title">WARNING</p><p>La méthode <code>fetchTemplateAndLoadSearchCriteriaComponents</code> permet d’appeler dynamiquement les différents blocs de critères. D’abord un premier service est contacté pour obtenir le template des blocs avec comme paramètre le projet pour lequel l’application a été instanciée <a href="https://services.sedoo.fr/metadatatemplate/swagger-ui.html#/Search32criteria32service324532Version322" target="_blank" rel="noopener noreferrer">https://services.sedoo.fr/metadatatemplate/swagger-ui.html#/Search32criteria32service324532Version322<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div><p>Une fois ce template en mémoire, une autre requête est envoyée pour interroger le CDN où se trouve les différents blocs, ceux attendus sont téléchargés et ajoutés dans une balise script. Avec leur référence, chaque composant est appelé. La partie du code qui appelle le CDN se trouve dans le store <a href="/catalog/store#Aeris-notification-store">aeris-catalog-searchcriteria-components-store</a>.</p><h2 id="affichage-d’une-fiche-de-métadonnées"><a href="#affichage-d’une-fiche-de-métadonnées" aria-hidden="true" class="header-anchor">#</a> Affichage d’une fiche de métadonnées</h2><h3 id="md-tabs-container"><a href="#md-tabs-container" aria-hidden="true" class="header-anchor">#</a> md-tabs-container</h3><p>L’affichage d’une fiche se fait dans le composant <code>md-tabs-container</code>, qui est appelé par <code>aeris-catalog-metadata-panel</code>.</p><p>Au chargement du composant metadata-panel, les métadonnées sont récupérés avec l’uuid de la fiche, et transmises à travers la props « metadata » vers <code>md-tabs-container</code>.
Comme pour les critères de recherches, le code des différents composants pour afficher les blocs de métadonnées sont chargés dynamiquement à partir du CDN du SEDOO.</p><p>Au moment où <code>md-tabs-container</code> est monté, une requête est envoyée vers le service de template (voir <a href="/sedoo-catalogue-doc/" class="router-link-active">swagger</a>).
Ce service prends en paramètre un nom de template qui est normalement renseigné dans les métadonnées de la fiche. Si ce n’est pas le cas, un template par défaut est chargé.</p><p>Un template est composé d’une liste d’onglets, et chaque onglet est composé d’une liste de blocs de métadonnées à afficher. Pour chaque bloc il est possible de rajouter des props supplémentaires qui seront utilisées dans le code du composant dudit bloc.</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
   <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aeris-metadata-downloads&quot;</span><span class="token punctuation">,</span>
   <span class="token string">&quot;editable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token string">&quot;props&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token string">&quot;downloadComponentName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aeris-metadata-year-select-download&quot;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="md-tab-generic"><a href="#md-tab-generic" aria-hidden="true" class="header-anchor">#</a> md-tab-generic</h3><p>L’affichage de chaque onglet se fait dans le composant md-tab-generic. Le composant md-tabs-container transmet les props suivantes :</p><table><thead><tr><th>props</th><th>description</th></tr></thead><tbody><tr><td>componentsToDisplay</td><td>la liste des blocs à afficher</td></tr><tr><td>metadata</td><td>les métadonnées de la fiche</td></tr><tr><td>isEditingSheet</td><td>un flag permettant d’indiquer si l’utilisateur est en train de créer ou d’éditer une fiche</td></tr><tr><td>blockNameToFocus</td><td>si renseignée, permet de faire un focus sur un bloc particulier une fois le composant monté</td></tr><tr><td>metadataService</td><td>l’adresse du service de métadonnées</td></tr></tbody></table><p>Une fois le composant créé, le store <code>aeris-catalogue-landing-page-store</code> est utilisé avec l’action « <code>importThoseComponents</code> » qui permet d’aller charger le code du composant de chaque bloc sur le CDN du SEDOO.
Pour la navigation, chaque onglet appelle une instance du composant <code>aeris-landing-page-programmatic-scrolling</code>. Ce composant permet aux utilisateurs de focus rapidement un bloc de métadonnées.</p><p>Dans le template html, les props suivantes doivent être transmises à chaque composant :</p><table><thead><tr><th>props</th><th>description</th></tr></thead><tbody><tr><td>metadata-service</td><td>l’adresse du service pour gérer les métadonnées</td></tr><tr><td>metadata</td><td>les métadonnées de la fiche</td></tr><tr><td>is-edition-allowed</td><td>si l’utilisateur est en mode édition ou non, pour changer l’affichage de chaque bloc</td></tr></tbody></table><p>Les évènements suivants sont écoutés :</p><table><thead><tr><th>nom de l'événement</th><th>description</th></tr></thead><tbody><tr><td>sendEditedData</td><td>pour envoyer les modifications vers le store qui s’occupe de sauver les données enregistrées</td></tr><tr><td>getVisibility</td><td>pour savoir si le composant est visible et gérer la fonctionnalité de programmatic-scrolling</td></tr></tbody></table><h3 id="aeris-landing-page-edition"><a href="#aeris-landing-page-edition" aria-hidden="true" class="header-anchor">#</a> Aeris-landing-page-edition</h3><p>Ce composant permet d’afficher les différents boutons d’édition. Pour communiquer avec les autres composants un event-bus est utilisé : <code>$editionEventBus</code>. Les composants qui écoutent ce bus d’évènements sont les suivants : <code>md-tabs-container</code> (edit, duplicate, delete, save) et <code>aeris-catalog-metadata-panel</code> (duplicate).</p><p>L’affichage des différents boutons est déterminé par l’écoute des états du store <code>aeris-catalogue-landing-page-store</code>.</p></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/sedoo-catalogue-doc/catalog/howItWorks.html" class="prev">
          Fonctionnement
        </a></span><span class="next"><a href="/sedoo-catalogue-doc/catalog/store.html">
          Liste des modules Vuex
        </a> →
      </span></p></div></div></div></div>
    <script src="/sedoo-catalogue-doc/assets/js/app.91d0e13d.js" defer></script><script src="/sedoo-catalogue-doc/assets/js/4.9a9e73ef.js" defer></script>
  </body>
</html>
